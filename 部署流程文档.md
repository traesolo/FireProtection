# 消防设备终端一体机部署流程

## 项目概述
本项目是一个基于Vue3 + Electron的消防设备监控终端应用，设计用于在一体机上开机自启动并全屏显示。

## 部署前准备

### 1. 开发环境要求
- Node.js 20.x 或更高版本
- npm 或 pnpm 包管理器
- Windows 10/11 操作系统

### 2. 项目构建
```bash
# 安装依赖
npm install

# 构建前端资源
npm run build

# 打包Electron应用（生成安装包）
npm run electron:dist

# 或者仅打包应用文件（不生成安装包）
npm run electron:pack
```

## 部署步骤

### 步骤1：生成安装包
1. 在开发机器上执行构建命令：
   ```bash
   npm run electron:dist
   ```

2. 构建完成后，在 `dist-electron` 目录下会生成：
   - `消防设备终端-1.0.0-setup.exe` - Windows安装包
   - `win-unpacked` 目录 - 免安装版本

### 步骤2：一体机环境准备
1. 确保一体机运行Windows 10/11系统
2. 关闭Windows Defender或添加应用到白名单
3. 确保一体机有管理员权限

### 步骤3：安装应用

#### 方式一：使用安装包（推荐）
1. 将 `消防设备终端-1.0.0-setup.exe` 复制到一体机
2. 右键以管理员身份运行安装包
3. 按照安装向导完成安装
4. 安装完成后应用会自动添加到开机启动项

#### 方式二：使用免安装版本
1. 将 `win-unpacked` 整个目录复制到一体机
2. 手动配置开机自启动（见下方说明）

### 步骤4：配置开机自启动（免安装版本需要）

#### 方法一：通过注册表
1. 按 `Win + R` 打开运行对话框
2. 输入 `regedit` 打开注册表编辑器
3. 导航到：`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run`
4. 新建字符串值，名称为 `FireProtectionTerminal`
5. 值设置为应用的完整路径，例如：`"C:\Program Files\消防设备终端\消防设备终端.exe"`

#### 方法二：通过启动文件夹
1. 按 `Win + R` 打开运行对话框
2. 输入 `shell:startup` 打开启动文件夹
3. 创建应用的快捷方式并放入此文件夹

### 步骤5：配置全屏显示
应用已配置为生产环境下自动全屏显示，无需额外配置。

### 步骤6：测试验证
1. 重启一体机
2. 确认应用自动启动并全屏显示
3. 测试退出按钮功能（应该能正常关闭应用回到桌面）
4. 测试应用的各项功能是否正常

## 应用功能说明

### 主要特性
- **开机自启动**：应用会在Windows启动时自动运行
- **全屏显示**：生产环境下自动全屏，隐藏系统任务栏
- **退出功能**：点击右上角退出按钮可关闭应用回到系统桌面
- **无边框窗口**：提供沉浸式体验

### 快捷键（开发模式）
- `Ctrl+Shift+I`：打开开发者工具
- `F5`：刷新页面
- `F11`：切换全屏模式

## 故障排除

### 常见问题

1. **应用无法启动**
   - 检查是否有足够的系统权限
   - 确认Windows版本兼容性
   - 查看Windows事件日志获取错误信息

2. **开机自启动失败**
   - 检查注册表项是否正确添加
   - 确认应用路径是否正确
   - 检查Windows启动项管理器中的设置

3. **退出按钮无效**
   - 确认Electron主进程和渲染进程通信正常
   - 检查preload.js是否正确加载

4. **应用崩溃**
   - 查看应用日志文件
   - 检查系统资源使用情况
   - 确认依赖库版本兼容性

### 日志文件位置
- Windows: `%APPDATA%\消防设备终端\logs\`

## 维护说明

### 更新部署
1. 在开发环境构建新版本
2. 生成新的安装包
3. 在一体机上卸载旧版本（如果使用安装包方式）
4. 安装新版本
5. 验证功能正常

### 备份建议
- 定期备份应用配置文件
- 保留安装包副本用于快速恢复

## 技术支持
如遇到部署问题，请联系技术支持团队并提供：
- 一体机系统信息
- 错误日志文件
- 问题复现步骤

---

**注意事项：**
- 部署前请在测试环境充分验证
- 建议在非生产时间进行部署
- 部署完成后进行全面功能测试